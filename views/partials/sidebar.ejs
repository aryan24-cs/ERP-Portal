<nav class="sidebar">
  <div class="px-4 py-6">
    <h2 class="text-2xl font-bold text-flow mb-6">ERP Portal</h2>
    <div class="sidebar-nav">
      <a
        href="/users/user?token=<%= token %>"
        class="<%= currentPage && currentPage.toLowerCase() === 'user' ? 'active' : '' %>"
        data-page="user"
        aria-current="<%= currentPage && currentPage.toLowerCase() === 'user' ? 'page' : 'false' %>"
      >
        <i class="fas fa-home"></i> Dashboard
      </a>
      <a
        href="/users/attendance?token=<%= token %>"
        class="<%= currentPage && currentPage.toLowerCase() === 'attendance' ? 'active' : '' %>"
        data-page="attendance"
        aria-current="<%= currentPage && currentPage.toLowerCase() === 'attendance' ? 'page' : 'false' %>"
      >
        <i class="fas fa-calendar-check"></i> Attendance
      </a>
      <a
        href="/users/teachers?token=<%= token %>"
        class="<%= currentPage && currentPage.toLowerCase() === 'teachers' ? 'active' : '' %>"
        data-page="teachers"
        aria-current="<%= currentPage && currentPage.toLowerCase() === 'teachers' ? 'page' : 'false' %>"
      >
        <i class="fas fa-chalkboard-teacher"></i> Your Teachers
      </a>
      <a
        href="/users/documents?token=<%= token %>"
        class="<%= currentPage && currentPage.toLowerCase() === 'documents' ? 'active' : '' %>"
        data-page="documents"
        aria-current="<%= currentPage && currentPage.toLowerCase() === 'documents' ? 'page' : 'false' %>"
      >
        <i class="fas fa-file-alt"></i> Your Documents
      </a>
      <a
        href="/users/update-profile?token=<%= token %>"
        class="<%= currentPage && currentPage.toLowerCase() === 'update-profile' ? 'active' : '' %>"
        data-page="update-profile"
        aria-current="<%= currentPage && currentPage.toLowerCase() === 'update-profile' ? 'page' : 'false' %>"
      >
        <i class="fas fa-user-edit"></i> Update Profile
      </a>
      <a href="/" data-page="logout">
        <i class="fas fa-sign-out-alt"></i> Logout
      </a>
    </div>
  </div>

  <style>
    :root {
      --primary-blue: #3b82f6;
      --primary-purple: #8b5cf6;
    }

    .text-flow {
      color: white;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-right: 1px solid rgba(255, 255, 255, 0.2);
      padding: 2rem 1rem;
      z-index: 1000;
      transition: transform 0.3s ease;
    }

    .sidebar.hidden {
      transform: translateX(-100%);
    }

    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }
      .sidebar.active {
        transform: translateX(0);
      }
    }

    .sidebar-nav a {
      display: flex;
      align-items: center;
      padding: 0.75rem 1rem;
      color: white;
      text-decoration: none;
      border-radius: 10px;
      margin-bottom: 0.5rem;
      transition: all 0.3s ease;
      font-size: 1rem;
      font-weight: 500;
    }

    .sidebar-nav a:hover,
    .sidebar-nav a.active {
      background: linear-gradient(
        135deg,
        var(--primary-blue),
        var(--primary-purple)
      );
      transform: translateX(5px);
      color: white;
      font-weight: 600;
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
    }

    .sidebar-nav a.active {
      border-left: 4px solid var(--primary-blue);
    }

    .sidebar-nav a i {
      margin-right: 0.75rem;
      font-size: 1.2rem;
    }
  </style>

  <!-- <script>
    // Ensure the correct sidebar link is highlighted on page load
    document.addEventListener("DOMContentLoaded", () => {
      const currentPath = window.location.pathname;
      const sidebarLinks = document.querySelectorAll(".sidebar-nav a");

      // Remove active class from all links
      sidebarLinks.forEach((link) => link.classList.remove("active"));

      // Map paths to page identifiers
      const pageMap = {
        "/users/user": "user",
        "/users/attendance": "attendance",
        "/users/teachers": "teachers",
        "/users/documents": "documents",
        "/users/update-profile": "update-profile",
      };

      // Find and highlight the matching link
      const currentPage = pageMap[currentPath];
      if (currentPage) {
        const activeLink = document.querySelector(
          `.sidebar-nav a[data-page="${currentPage}"]`
        );
        if (activeLink) {
          activeLink.classList.add("active");
          activeLink.setAttribute("aria-current", "page");
        }
      }

      // Handle sidebar toggle (consistent with update-profile.ejs)
      const sidebar = document.querySelector(".sidebar");
      const toggle = document.querySelector(".sidebar-toggle");
      if (toggle) {
        toggle.addEventListener("click", () => {
          sidebar.classList.toggle("active");
        });
      }
    });
  </script> -->
</nav>
